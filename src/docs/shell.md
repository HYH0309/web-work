
# å¸Œå°”æ’åº

## ğŸŒŸ æ ¸å¿ƒç‰¹å¾

- **å¸Œå°”æ’åº**æ˜¯ä¸€ç§åŸºäºæ’å…¥æ’åºçš„æ’åºç®—æ³•ï¼Œé€šè¿‡å°†æ•°ç»„åˆ†ä¸ºå¤šä¸ªå­æ•°ç»„åˆ†åˆ«è¿›è¡Œæ’å…¥æ’åºï¼Œç„¶åé€æ¸å‡å°é—´éš”è¿›è¡Œå†æ¬¡æ’åºã€‚å…¶æ ¸å¿ƒåˆ›æ–°ç‚¹åœ¨äºï¼š**é€šè¿‡å¼•å…¥æ­¥é•¿é—´éš”ï¼Œä½¿å…ƒç´ èƒ½å¤Ÿåœ¨æœªæ’åºåºåˆ—ä¸­å®ç°è¿œè·ç¦»ç§»åŠ¨ï¼ŒåŠ é€Ÿæ’åºè¿‡ç¨‹**ã€‚
- å…¸å‹åº”ç”¨åœºæ™¯ä¸ºä¸­ç­‰è§„æ¨¡æ•°æ®æ’åºæˆ–æ•°æ®å±€éƒ¨æ€§è¾ƒå¥½çš„æ’åºåœºæ™¯ã€‚
- æ•°å­¦å¤æ‚åº¦æ ‡è¯†ï¼š
  $$ \mathcal{O}(n^{3/2}) $$
  ï¼ˆå®é™…å¤æ‚åº¦ä¾èµ–æ­¥é•¿é€‰æ‹©ï¼‰

## ğŸ§® å½¢å¼åŒ–æè¿°

### æ—¶é—´å¤æ‚åº¦

$$
T(n) = \begin{cases}
    \Theta(n^{3/2}) & \text{ä½¿ç”¨ Hibbard å¢é‡åº} \\
    \Theta(n \log n) & \text{æŸäº›ç‰¹æ®Šå¢é‡åº} \\
    \Theta(n^2) & \text{æœ€åæƒ…å†µ}
\end{cases}
$$

### ç©ºé—´å¤æ‚åº¦

$$ S(n) = \Theta(1) $$

## ğŸ›  å®ç°æ­¥éª¤

1. **é¢„å¤„ç†é˜¶æ®µ**ï¼šåˆå§‹åŒ–æ­¥é•¿åºåˆ—ï¼Œé»˜è®¤å¯ä»¥ä½¿ç”¨ Hibbard å¢é‡åºï¼ˆh = 3h + 1ï¼‰ã€‚
2. **æ ¸å¿ƒé€»è¾‘**ï¼š

    ```python
    for gap in gaps:
        for i in range(gap, n):
            temp = arr[i]
            j = i
            while j >= gap and arr[j - gap] > temp:
                arr[j] = arr[j - gap]
                j -= gap
            arr[j] = temp

```
3. **ç»ˆæ­¢æ¡ä»¶**ï¼šå®Œæˆæ‰€æœ‰æ­¥é•¿çš„æ’å…¥æ’åºåæ’åºç»“æŸã€‚

## ğŸ“Š æ€§èƒ½å¯¹æ¯”
| æŒ‡æ ‡ç±»å‹   | æœ€ä¼˜æƒ…å†µ | å…¸å‹æƒ…å†µ | æœ€å·®æƒ…å†µ |
|------------|----------|----------|----------|
| æ—¶é—´æ•ˆç‡   | O(n \log n) | O(n^{3/2}) | O(n^2) |
| å†…å­˜æ¶ˆè€—   | O(1)     | O(1)     | O(1)     |

## ğŸ’» ä»£ç å®ç°
### Python ç¤ºä¾‹
```python
def shell_sort(arr: list[int]) -> list[int]:
    """å¸Œå°”æ’åºç®—æ³•å®ç°"""
    if not arr:
        raise ValueError("è¾“å…¥æ•°ç»„ä¸èƒ½ä¸ºç©º")
    n = len(arr)
    # ä½¿ç”¨ Hibbard å¢é‡åº
    gap = 1
    while gap < n // 3:
        gap = gap * 3 + 1  # 1, 4, 13, 40...
    while gap >= 1:
        # å¯¹æ¯ä¸ªé—´éš” gap çš„å­æ•°ç»„è¿›è¡Œæ’å…¥æ’åº
        for i in range(gap, n):
            temp = arr[i]
            j = i
            while j >= gap and arr[j - gap] > temp:
                arr[j] = arr[j - gap]
                j -= gap
            arr[j] = temp
        gap = gap // 3
    return arr
```

### Java ç¤ºä¾‹

```java
public class ShellSort {
    public static int[] sort(int[] arr) {
        if (arr == null) {
            throw new IllegalArgumentException("è¾“å…¥æ•°ç»„ä¸èƒ½ä¸ºç©º");
        }
        int n = arr.length;
        // ä½¿ç”¨ Hibbard å¢é‡åº
        int gap = 1;
        while (gap < n / 3) {
            gap = gap * 3 + 1;  // 1, 4, 13, 40...
        }
        while (gap >= 1) {
            // å¯¹æ¯ä¸ªé—´éš” gap çš„å­æ•°ç»„è¿›è¡Œæ’å…¥æ’åº
            for (int i = gap; i < n; i++) {
                int temp = arr[i];
                int j = i;
                while (j >= gap && arr[j - gap] > temp) {
                    arr[j] = arr[j - gap];
                    j -= gap;
                }
                arr[j] = temp;
            }
            gap = gap / 3;
        }
        return arr;
    }
}
```

## ğŸŒ åº”ç”¨åœºæ™¯

- ä¸­ç­‰è§„æ¨¡æ•°æ®æ’åºï¼ˆå¦‚åœ¨çº¿æ•™è‚²å¹³å°çš„ä¸­æœŸè€ƒè¯•æˆç»©æ’åºï¼‰
- æ•°æ®å±€éƒ¨æ€§è¾ƒå¥½çš„æ’åºåœºæ™¯ï¼ˆå¦‚éƒ¨åˆ†æœ‰åºçš„æ•°æ®ï¼‰
- æ€§èƒ½è¦æ±‚é«˜äºç®€å•æ’å…¥æ’åºä½†ä½äºå¤æ‚ç®—æ³•çš„åœºæ™¯
